(this["webpackJsonpdcs-weather-app"]=this["webpackJsonpdcs-weather-app"]||[]).push([[0],{204:function(e,n,t){},240:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(87),o=t.n(c),i=t(88),l=t.n(i),u=(t(204),t(42)),s=t(6),m=t(17),f=t(22),d="https://api.weatherstack.com",p="FETCH_WEATHER",v="TOGGLE_FAVORITES",b={weather:{},favorites:[]},g=function(e,n){switch(n.type){case p:return Object(f.a)(Object(f.a)({},e),{},{weather:n.weather});case v:var t=n.weather.location.name,a=e.favorites.findIndex((function(e){return e.location.name===t}));if(-1===a){var r=[].concat(Object(m.a)(e.favorites),[n.weather]).sort((function(e,n){return e.location.name.localeCompare(n.location.name)}));return Object(f.a)(Object(f.a)({},e),{},{favorites:r})}return Object(f.a)(Object(f.a)({},e),{},{favorites:[].concat(Object(m.a)(e.favorites.slice(0,a)),Object(m.a)(e.favorites.slice(a+1)))});default:return e}},h=Object(a.createContext)(),E={WeatherStateContext:h,WeatherStateProvider:function(e){var n=e.children;return r.a.createElement(h.Provider,{value:Object(a.useReducer)(g,b)},n)}},y=t(1),O=t(2);function j(){var e=Object(y.a)(["\n  padding: 10rem 20rem;\n"]);return j=function(){return e},e}var x=O.a.div(j()),w=t(4),k=t(92),C=t.n(k),z=t(93),S=t.n(z),_=t(43),F=t(9),B=t(11),W=t.n(B),q=t(18),R=t(16),G=t.n(R);function P(){var e=Object(a.useState)({}),n=Object(w.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(!1),o=Object(w.a)(c,2),i=o[0],l=o[1],u=Object(a.useState)({}),s=Object(w.a)(u,2),m=s[0],f=s[1];return{weather:t,isFetchingCurrent:i,fetchCurrent:Object(a.useCallback)(function(){var e=Object(q.a)(W.a.mark((function e(n){var t,a,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={access_key:"77fc5a17b4912688fe7acd4acb23d8e4",query:n},e.prev=1,l(!0),e.next=5,G.a.get("".concat(d,"/current"),{params:t});case 5:a=e.sent,(c=a.data).error?f(c.error.info):r(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),f(e.t0);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(n){return e.apply(this,arguments)}}(),[]),errorMessage:m}}function L(){var e=Object(y.a)(["\n  cursor: pointer;\n  background-color: transparent;\n  border: none;\n\n  > span {\n    font-family: Raleway;\n    font-size: 1.5rem;\n    font-weight: 600;\n    text-decoration: underline;\n  }\n"]);return L=function(){return e},e}function H(){var e=Object(y.a)(["\n  background-color: transparent;\n  border: none;\n  margin-left: -3.5rem;\n  z-index: 10;\n  transition: all 0.2s ease-in-out;\n\n  &:active {\n    transform: translateY(5px);\n  }\n\n  &:focus {\n    outline: none;\n  }\n"]);return H=function(){return e},e}function T(){var e=Object(y.a)(["\n  & {\n    display: flex;\n\n    & .react-autosuggest {\n      &__container {\n        flex: 1;\n        position: relative;\n      }\n\n      &__input {\n        border: 2px solid var(--color-lightgrey);\n        font-family: 'Fredoka One', cursive;\n        font-size: 2.5rem;\n        letter-spacing: 2px;\n        padding: 1rem 4rem 1rem 1rem;\n        outline: none;\n        transition: all 0.2s ease-in-out;\n        width: 100%;\n\n        &::placeholder {\n          color: var(--color-lightgrey);\n        }\n\n        &:focus {\n          border: 2px solid var(--color-lightslategrey);\n\n          &::placeholder {\n            color: var(--color-lightslategrey);\n          }\n        }\n\n        &--open {\n          border-bottom-left-radius: 0;\n          border-bottom-right-radius: 0;\n        }\n      }\n\n      &__suggestions {\n        &-container {\n          display: none;\n        }\n\n        &-container--open {\n          display: block;\n          position: absolute;\n          top: 6rem;\n          width: 100%;\n          border: 2px solid var(--color-lightslategrey);\n          background-color: #fff;\n          font-family: Raleway;\n          font-weight: 400;\n          font-size: 1.6rem;\n          z-index: 10;\n        }\n\n        &-list {\n          margin: 0;\n          padding: 0;\n          list-style-type: none;\n        }\n      }\n\n      &__suggestion {\n        cursor: pointer;\n        padding: 1rem 2rem;\n\n        &--highlighted {\n          background-color: var(--color-lightslategrey);\n        }\n      }\n    }\n  }\n"]);return T=function(){return e},e}function I(){var e=Object(y.a)(["\n  margin: 0 auto;\n  max-width: 60rem;\n"]);return I=function(){return e},e}var A=O.a.div(I()),D=O.a.div(T()),M=O.a.button(H()),N=O.a.button(L());var V=function(){var e=Object(s.f)(),n=Object(a.useContext)(E.WeatherStateContext),t=Object(w.a)(n,2)[1],c=Object(a.useState)(""),o=Object(w.a)(c,2),i=o[0],l=o[1],u=P(),m=u.weather,f=u.isFetchingCurrent,v=u.fetchCurrent,b=function(){var e=Object(a.useState)([]),n=Object(w.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(!1),o=Object(w.a)(c,2),i=o[0],l=o[1],u=Object(a.useState)({}),s=Object(w.a)(u,2),m=s[0],f=s[1],p=Object(a.useCallback)(function(){var e=Object(q.a)(W.a.mark((function e(n){var t,a,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={access_key:"77fc5a17b4912688fe7acd4acb23d8e4",query:n},e.prev=1,l(!0),e.next=5,G.a.get("".concat(d,"/autocomplete"),{params:t});case 5:a=e.sent,(c=a.data).error?f(c.error.info):r(c.results),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),f(e.t0);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(n){return e.apply(this,arguments)}}(),[]);return{results:t,setResults:r,isLookingUp:i,lookup:p,errorLookupMsg:m}}(),g=b.results,h=b.isLookingUp,y=b.lookup,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(a.useState)(),t=Object(w.a)(n,2),r=t[0],c=t[1],o=Object(a.useState)(),i=Object(w.a)(o,2),l=i[0],u=i[1],s=function(e){var n=e.coords,t=n.latitude,a=n.longitude;c("".concat(t,",").concat(a))},m=function(e){u(e)},f=Object(a.useCallback)((function(){var n=navigator.geolocation;n?n.getCurrentPosition(s,m,e):u("Geolocation is not supported.")}),[e]);return{position:r,getPosition:f,error:l}}(),j=O.position,x=O.getPosition,k=Object(a.useMemo)((function(){return C()(y,400)}),[y]);return Object(a.useEffect)((function(){t({type:p,weather:m})}),[m,t]),Object(a.useEffect)((function(){j&&e.push("/details",{weather:m,query:i,position:j})}),[j,e,i,m]),r.a.createElement(A,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=e.target[0].value;""!==n&&v(n)}},r.a.createElement(D,null,r.a.createElement(S.a,{focusInputOnSuggestionClick:!1,inputProps:{placeholder:"Enter a city name",onChange:function(e,n){var t=n.newValue;l(t)},value:i},suggestions:g,onSuggestionsFetchRequested:function(e){var n=e.reason,t=e.value;"input-changed"===n?k(t):k.cancel()},onSuggestionsClearRequested:function(){},onSuggestionSelected:function(e,n){var t=n.suggestionValue;"click"===e.type&&v(t)},getSuggestionValue:function(e){return"".concat(e.name,", ").concat(e.region,", ").concat(e.country)},renderSuggestion:function(e){return r.a.createElement("span",null,"".concat(e.name,", ").concat(e.region,", ").concat(e.country))}}),r.a.createElement(M,null,r.a.createElement(_.a,{size:"2x",icon:h||f?F.c:F.b,spin:h||f})))),r.a.createElement("div",{style:{marginTop:"1rem",textAlign:"center"}},r.a.createElement(N,{onClick:function(){return x()}},r.a.createElement("span",null,"Or use my location"))))},Y=t(28),J=t(94);function U(){var e=Object(y.a)(["\n  ",";\n  ",";\n  ",";\n  ",";\n"]);return U=function(){return e},e}var Z=O.a.span(U(),(function(e){return e.primary&&"font-family: 'Fredoka One'"}),(function(e){return e.secondary&&"font-family: 'Raleway'"}),(function(e){return e.weight&&"font-weight: ".concat(e.weight)}),(function(e){return e.size&&"font-size: ".concat(e.size)}));function K(){var e=Object(y.a)(["\n  &&& {\n    cursor: 'pointer';\n    ",";\n  }\n"]);return K=function(){return e},e}var Q=Object(O.a)(_.a)(K(),(function(e){return e.color&&"color: ".concat(e.color)}));function X(){var e=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n  text-align: center;\n  align-items: center;\n"]);return X=function(){return e},e}var $=O.a.div(X());function ee(){var e=Object(y.a)(["\n  margin-bottom: 1.5rem;\n"]);return ee=function(){return e},e}var ne=O.a.div(ee());function te(){var e=Object(y.a)(["\n  display: inline-block;\n"]);return te=function(){return e},e}var ae=O.a.div(te());ae.Group=$,ae.Body=ne;var re=ae;function ce(){var e=Object(y.a)(["\n  align-self: flex-end;\n\n  & > img {\n    border-radius: 10rem;\n    height: 12rem;\n    width: 12rem;\n  }\n"]);return ce=function(){return e},e}function oe(){var e=Object(y.a)(["\n  flex: 1;\n"]);return oe=function(){return e},e}function ie(){var e=Object(y.a)(["\n  display: flex;\n  flex-basis: 40%;\n  justify-content: space-evenly;\n"]);return ie=function(){return e},e}function le(){var e=Object(y.a)(["\n  display: flex;\n"]);return le=function(){return e},e}function ue(){var e=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 2.5rem;\n\n  h2 {\n    margin-bottom: 1rem;\n  }\n"]);return ue=function(){return e},e}var se=O.a.header(ue()),me=O.a.div(le()),fe=O.a.div(ie()),de=O.a.div(oe()),pe=O.a.span(ce());var ve=function(){var e=Object(a.useContext)(E.WeatherStateContext),n=Object(w.a)(e,2),t=n[0],c=t.weather,o=t.favorites,i=n[1];console.log(c);var l=c.current,u=c.location;return 0===Object.keys(c).length?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(se,null,r.a.createElement("div",null,r.a.createElement("h2",null,r.a.createElement(Z,{size:"3rem",primary:!0},"".concat(u.name,", ").concat(u.country))),r.a.createElement("p",null,r.a.createElement(Z,{weight:"300",size:"2.5rem",secondary:!0},new Date(1e3*u.localtime_epoch).toDateString()))),r.a.createElement("span",{onClick:function(){return i({type:v,weather:c})}},r.a.createElement(Q,{color:"orange",icon:-1!==o.findIndex((function(e){return e.location.name===u.name}))?F.d:Y.b,size:"3x"}))),r.a.createElement(me,null,r.a.createElement(fe,null,r.a.createElement(pe,null,r.a.createElement("img",{alt:"weather icon",src:l.weather_icons[0]})),r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(Z,{size:"10rem",secondary:!0},l.temperature,"\xb0")),r.a.createElement("h4",null,r.a.createElement(Z,{size:"2.5rem",weight:"400",secondary:!0},l.weather_descriptions[0])))),r.a.createElement(de,null,r.a.createElement(re.Group,{style:{height:"100%"}},r.a.createElement(re,null,r.a.createElement(Z,{size:"2rem",weight:"300",primary:!0},"Wind Speed"),r.a.createElement(re.Body,null,r.a.createElement(Z,{size:"2.5rem",secondary:!0},"".concat(l.wind_speed," km/h"))),r.a.createElement(Q,{icon:F.g,size:"4x"})),r.a.createElement(re,null,r.a.createElement(Z,{size:"2rem",weight:"300",primary:!0},"Wind Direction"),r.a.createElement(re.Body,null,r.a.createElement(Z,{size:"2.5rem",secondary:!0},"".concat(l.wind_dir))),r.a.createElement(Q,{icon:Y.a,size:"4x"})),r.a.createElement(re,null,r.a.createElement(Z,{size:"2rem",weight:"300",primary:!0},"Pressure"),r.a.createElement(re.Body,null,r.a.createElement(Z,{size:"2.5rem",secondary:!0},"".concat(l.pressure," mb"))),r.a.createElement(Q,{icon:J.a,size:"4x"})),r.a.createElement(re,null,r.a.createElement(Z,{size:"2rem",weight:"300",primary:!0},"Humidity"),r.a.createElement(re.Body,null,r.a.createElement(Z,{size:"2.5rem",secondary:!0},"".concat(l.humidity," %"))),r.a.createElement(Q,{icon:F.f,size:"4x"})),r.a.createElement(re,null,r.a.createElement(Z,{size:"2rem",weight:"300",primary:!0},"Cloud Cover"),r.a.createElement(re.Body,null,r.a.createElement(Z,{size:"2.5rem",secondary:!0},"".concat(l.cloudcover," %"))),r.a.createElement(Q,{icon:F.a,size:"4x"})),r.a.createElement(re,null,r.a.createElement(Z,{size:"2rem",weight:"300",primary:!0},"Feels like"),r.a.createElement(re.Body,null,r.a.createElement(Z,{size:"2.5rem",secondary:!0},"".concat(l.feelslike," ","\xb0","C"))),r.a.createElement(Q,{icon:F.e,size:"4x"}))))))};function be(){var e=Object(y.a)(["\n  display: grid;\n  grid-column-gap: 2rem;\n  grid-row-gap: 2rem;\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n"]);return be=function(){return e},e}var ge=O.a.div(be());function he(){var e=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return he=function(){return e},e}var Ee=O.a.header(he());var ye=function(e){var n=e.title,t=e.subtitle,a=e.children;return r.a.createElement(Ee,null,r.a.createElement("div",null,r.a.createElement("h2",null,r.a.createElement(Z,{size:"2rem",primary:!0},n)),r.a.createElement("p",null,r.a.createElement(Z,{size:"1.5rem",weight:"200",secondary:!0},t))),a)};function Oe(){var e=Object(y.a)([""]);return Oe=function(){return e},e}var je=O.a.div(Oe());function xe(){var e=Object(y.a)(["\n  background: #fff;\n  padding: 0 1rem;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  opacity: 0;\n  top: 100%;\n  transition: all 0.2s ease-out;\n"]);return xe=function(){return e},e}var we=O.a.div(xe());function ke(){var e=Object(y.a)(["\n  border: 1px solid grey;\n  padding: 1rem;\n  position: relative;\n  transition: all 0.2s ease-out;\n\n  &:hover {\n    border: 1px solid deepskyblue;\n    transform: translateY(-10px);\n    .overlay {\n      opacity: 0.8;\n      top: 40%;\n    }\n  }\n"]);return ke=function(){return e},e}var Ce=O.a.div(ke());Ce.Header=ye,Ce.Body=je,Ce.Overlay=we;var ze=Ce;function Se(){var e=Object(y.a)(["\n  background-color: #fff;\n  border: 1px solid slategray;\n  border-radius: 5rem;\n  font-size: 1.2rem;\n  padding: 5px 8px;\n  transition: all 0.2s ease-out;\n\n  &:hover {\n    border: 1px solid deepskyblue;\n    color: deepskyblue;\n  }\n\n  &:active {\n    transform: translateY(5px);\n  }\n"]);return Se=function(){return e},e}function _e(){var e=Object(y.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  justify-content: center;\n  height: 100%;\n\n  & > button:first-child {\n    margin-bottom: 5px;\n  }\n"]);return _e=function(){return e},e}var Fe=O.a.div(_e()),Be=O.a.button(Se());Be.Group=Fe;var We=Be;var qe=function(){var e=Object(a.useContext)(E.WeatherStateContext),n=Object(w.a)(e,2),t=n[0].favorites,c=n[1],o=Object(s.f)();return 0===t.length?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginBottom:"2.5rem"}},r.a.createElement("h2",null,r.a.createElement(Z,{size:"3rem",primary:!0},"Favorites (".concat(t.length,")")))),r.a.createElement(ge,null,t.map((function(e,n){var t=e.current,a=e.location;return r.a.createElement(ze,{key:n},r.a.createElement(ze.Header,{title:a.name,subtitle:a.region},r.a.createElement("span",{onClick:function(){return c({type:v,weather:e})}},r.a.createElement(Q,{color:"orange",icon:F.d,size:"2x"}))),r.a.createElement(ze.Body,null,r.a.createElement("div",null,r.a.createElement(Z,{size:"5rem",secondary:!0},t.temperature,"\xb0")),r.a.createElement("p",null,r.a.createElement(Z,{size:"1.5rem",weight:"200",secondary:!0},t.weather_descriptions[0]))),r.a.createElement(ze.Overlay,{className:"overlay"},r.a.createElement(We.Group,null,r.a.createElement(We,{onClick:function(){return o.push("/details",{weather:e,query:a.name})}},"Learn more"))))}))))},Re=t(95);var Ge=function(){var e=Object(a.useContext)(E.WeatherStateContext),n=Object(w.a)(e,2),t=n[0].favorites,c=n[1],o=function(){var e=Object(a.useState)([]),n=Object(w.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(!1),o=Object(w.a)(c,2),i=o[0],l=o[1],u=Object(a.useState)(),s=Object(w.a)(u,2),f=s[0],p=s[1],v=function(){var e=Object(q.a)(W.a.mark((function e(){var n,t,a,c,o,i,u;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("cities.json");case 2:return n=e.sent,t=n.data,a=t.reduce((function(e,n){return[].concat(Object(m.a)(e),[n.Name])}),[]).join(";"),c={access_key:"77fc5a17b4912688fe7acd4acb23d8e4",query:a},e.prev=6,l(!0),e.next=10,G.a.get("".concat(d,"/current"),{params:c});case 10:o=e.sent,i=o.data,u=i.sort((function(e,n){return e.location.name.localeCompare(n.location.name)})),r(u),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),p(e.t0);case 19:return e.prev=19,l(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[6,16,19,22]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useState)((function(){0===t.length&&v()}),[]),{cities:t,setCities:r,isFetchingCities:i,errorCitiesMsg:f}}(),i=o.cities,l=o.setCities;return 0===i.length?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginBottom:"2.5rem"}},r.a.createElement("h2",null,r.a.createElement(Z,{size:"3rem",primary:!0},"Top 15 cities by population (A-Z)"))),r.a.createElement(ge,null,function(){var e=function(){var e,n={},a=Object(Re.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;n[r.location.name]=r.location.name}}catch(c){a.e(c)}finally{a.f()}return n}();return i.map((function(n,t){var a=n.current,o=n.location;return r.a.createElement(ze,{key:t},r.a.createElement(ze.Header,{title:o.name,subtitle:o.region},r.a.createElement("span",{onClick:function(){return c({type:v,weather:n})}},r.a.createElement(Q,{color:"orange",icon:e[o.name]?F.d:Y.b,size:"2x"}))),r.a.createElement(ze.Body,null,r.a.createElement("div",null,r.a.createElement(Z,{size:"5rem",secondary:!0},a.temperature,"\xb0")),r.a.createElement("p",null,r.a.createElement(Z,{size:"1.5rem",weight:"200",secondary:!0},a.weather_descriptions[0]))),r.a.createElement(ze.Overlay,{className:"overlay"},r.a.createElement(We.Group,null,r.a.createElement(We,null,"Learn more"),r.a.createElement(We,{onClick:function(){return e=t,void l([].concat(Object(m.a)(i.slice(0,e)),Object(m.a)(i.slice(e+1))));var e}},"Remove"))))}))}()))};function Pe(){var e=Object(y.a)(["\n  margin-bottom: 2.5rem;\n"]);return Pe=function(){return e},e}var Le=O.a.div(Pe());var He=function(){return r.a.createElement(x,null,r.a.createElement(Le,null,r.a.createElement("header",null,r.a.createElement(V,null))),r.a.createElement("main",null,r.a.createElement(Le,null,r.a.createElement(ve,null)),r.a.createElement(Le,null,r.a.createElement(qe,null)),r.a.createElement(Le,null,r.a.createElement(Ge,null))))};var Te=function(e){var n=e.history.location.state,t=n.query,c=n.position,o=Object(a.useContext)(E.WeatherStateContext),i=Object(w.a)(o,2)[1],l=function(e){var n=Object(a.useState)([]),t=Object(w.a)(n,2),r=t[0],c=(t[1],Object(a.useState)(!1)),o=Object(w.a)(c,2),i=o[0],l=o[1],u=Object(a.useState)(""),s=Object(w.a)(u,2),m=(s[0],s[1]),f=Object(a.useCallback)(Object(q.a)(W.a.mark((function n(){var t,a,r;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={access_key:"77fc5a17b4912688fe7acd4acb23d8e4",forecast_days:7,query:e},n.prev=1,l(!0),n.next=5,G.a.get("".concat(d,"/forecast"),{params:t});case 5:a=n.sent,r=a.data,console.log(r),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),m(n.t0);case 13:return n.prev=13,l(!1),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,10,13,16]])}))),[e]);return Object(a.useEffect)((function(){f(e)}),[f,e]),{forecast:r,isFetchingForecast:i}}(t),u=(l.forecast,l.isFetchingForecast,P()),s=u.weather,m=(u.isFetchingCurrent,u.fetchCurrent);return Object(a.useEffect)((function(){t&&m(t),c&&m(c)}),[m,t,c]),Object(a.useEffect)((function(){i({type:p,weather:s})}),[s,i]),r.a.createElement(x,null,r.a.createElement(ve,null))};var Ie=function(){return r.a.createElement(u.a,{basename:"/dcs-weather-app/"},r.a.createElement(E.WeatherStateProvider,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:He}),r.a.createElement(s.a,{path:"/details",component:Te}))))};l()(r.a,{onlyLogs:!0,titleColor:"green",diffNameColor:"darkturquoise"}),o.a.render(r.a.createElement(Ie,null),document.getElementById("root"))},96:function(e,n,t){e.exports=t(240)}},[[96,1,2]]]);
//# sourceMappingURL=main.1f8fd73f.chunk.js.map